<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ABS Crackers World</title>
  <meta name="theme-color" content="#0ea5e9" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b1220;--card:#0f172a;--muted:#94a3b8;--text:#e2e8f0;--accent:#0ea5e9;--ok:#22c55e;--bad:#ef4444}
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;background:linear-gradient(180deg,#0a0f1c,#0b1220 40%);color:var(--text)}
    a{color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:12px}
    header{position:sticky;top:0;z-index:50;background:rgba(15,23,42,.8);backdrop-filter:blur(10px);border-bottom:1px solid #1f2937}
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:10px 12px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand h1{font-size:18px;margin:0;font-weight:700;letter-spacing:.2px}
    .badge{font-size:11px;padding:3px 8px;border:1px solid #1f2937;border-radius:999px;color:var(--muted)}
    .filters{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    @media(min-width:720px){.filters{grid-template-columns:220px 1fr 1fr}}
    select,input[type="search"]{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #1f2937;background:#0b1220;color:var(--text)}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    @media(min-width:720px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
    @media(min-width:1024px){.grid{grid-template-columns:repeat(4,minmax(0,1fr))}}
    .card{background:linear-gradient(180deg,#0f172a,#0b1220);border:1px solid #1f2937;border-radius:16px;padding:12px;display:flex;flex-direction:column;gap:8px;min-height:160px}
    .title{font-weight:600;font-size:14px;line-height:1.2}
    .muted{color:var(--muted);font-size:12px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .pill{font-size:11px;padding:2px 8px;border-radius:999px;border:1px dashed #1f2937;color:#93c5fd}
    .price{display:flex;align-items:baseline;gap:8px}
    .price .mrp{text-decoration:line-through;color:#64748b;font-size:12px}
    .price .sale{font-size:16px;font-weight:700;color:#e0f2fe}
    .qty{display:flex;gap:6px;align-items:center}
    .qty button{width:28px;height:28px;border:1px solid #1f2937;background:#0a0f1c;color:var(--text);border-radius:8px}
    .qty input{width:40px;text-align:center;padding:6px;border:1px solid #1f2937;border-radius:8px;background:#0a0f1c;color:var(--text)}
    .btn{appearance:none;border:0;border-radius:10px;padding:10px 12px;font-weight:600;cursor:pointer}
    .btn-primary{background:linear-gradient(180deg,#0284c7,#0369a1);color:white;border:1px solid #075985}
    .btn-ghost{background:transparent;border:1px dashed #1f2937;color:var(--text)}
    .layout{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:1024px){.layout{grid-template-columns:1fr 360px}}
    .cart{position:sticky;top:60px;align-self:start;background:linear-gradient(180deg,#0f172a,#0b1220);border:1px solid #1f2937;border-radius:16px;padding:12px}
    .cart h3{margin:0 0 8px 0}
    .cart-list{display:flex;flex-direction:column;gap:8px;max-height:50vh;overflow:auto;padding-right:4px}
    .cart-item{display:grid;grid-template-columns:1fr auto;gap:4px;padding:8px;border:1px solid #1f2937;border-radius:12px;background:#0a0f1c}
    .cart-item .name{font-size:13px;font-weight:600}
    .cart-item .meta{font-size:12px;color:var(--muted)}
    .cart-item .amt{font-weight:700}
    .summary{display:grid;gap:6px;margin-top:8px}
    .summary .row{font-size:14px}
    .divider{height:1px;background:#1f2937;margin:8px 0}
    footer{padding:40px 0;color:#94a3b8;text-align:center}
    .empty{border:1px dashed #1f2937;border-radius:12px;padding:20px;text-align:center;color:var(--muted)}
    .toast{position:fixed;bottom:12px;left:50%;transform:translateX(-50%);background:#0a0f1c;border:1px solid #1f2937;color:var(--text);padding:10px 14px;border-radius:10px;display:none}
    /* Flexbox for header */
.container.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
}

.brand {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Offer badge */
.offer-badge {
  background: #38bdf8; /* Sky Blue */
  color: #fff;
  padding: 8px 14px;
  border-radius: 12px;
  font-size: 15px;
  font-weight: bold;
  text-align: center;
  box-shadow: 0 0 12px rgba(56,189,248,0.7);
  animation: pulse 1.5s infinite, firework 2s infinite;
}

/* Glow animation */
@keyframes pulse {
  0% { box-shadow: 0 0 6px rgba(56,189,248,0.6); }
  50% { box-shadow: 0 0 20px rgba(56,189,248,1); }
  100% { box-shadow: 0 0 6px rgba(56,189,248,0.6); }
}

/* Crackers wiggle */
@keyframes firework {
  0% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.1) rotate(-5deg); }
  50% { transform: scale(1.2) rotate(5deg); }
  75% { transform: scale(1.1) rotate(-3deg); }
  100% { transform: scale(1) rotate(0deg); }
}

/* ðŸ“± Mobile Fix: Move badge below logo */
@media (max-width: 600px) {
  .container.topbar {
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }
}
  </style>
  <!-- jsPDF for PDF generation -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script> -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-/F1OeG0cJ4c9bYkG5oB12tYt7cO2k5gKQx2i6C2zq7bQ9QttC5+n7m9GJm9kQxHk6qL1b0D5V6lJg3QfL7iVwA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>

    <header>
  <div class="container topbar">
    <div class="brand">
      <img src="https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg" alt="ABS Logo" style="height:40px; margin-right:8px;">
      <h1>ABS Crackers World</h1>
    </div>

    <!-- Offer Badge -->
    <div class="offer-badge">
      ðŸŽ† 90% OFFER ðŸŽ†<br>
      <small>Min Order â‚¹3000</small>
    </div>
  </div>

  <div class="container" style="padding-bottom:12px;">
    <div class="filters">
      <select id="categoryFilter"></select>
      <input id="search" type="search" placeholder="Search item nameâ€¦"/>
    </div>
  </div>
</header>

  <!-- <header>
    <div class="container topbar">
      <div class="brand">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2l2.39 4.84 5.34.78-3.86 3.76.91 5.3L12 14.77 6.22 16.68l.91-5.3L3.27 7.62l5.34-.78L12 2z" stroke="#38bdf8"/></svg>
        <h1>ABS Crackers World</h1>
      </div>
    </div>
    <div class="container" style="padding-bottom:12px;">
      <div class="filters">
        <select id="categoryFilter"></select>
        <input id="search" type="search" placeholder="Search item nameâ€¦"/>
      </div>
    </div>
  </header> -->


  <!-- <header>
  <div class="container topbar">
    <div class="brand">
      
      <img src="https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg" 
           alt="ABS Crackers Logo" 
           style="height:40px; width:auto; margin-right:8px; border-radius:6px;">
      <h1>ABS Crackers World</h1>
    </div>
  </div>
  <div class="container" style="padding-bottom:12px;">
    <div class="filters">
      <select id="categoryFilter"></select>
      <input id="search" type="search" placeholder="Search item nameâ€¦"/>
    </div>
  </div>
</header> -->

<!-- <header>
  <div class="container topbar" style="position: relative;">
    <div class="brand">
      
      <img src="https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg" 
           alt="ABS Crackers Logo" 
           style="height:40px; width:auto; margin-right:8px; border-radius:6px;">
      <h1>ABS Crackers World</h1>
    </div> -->

    <!-- Offer Badge -->
    <!-- <div style="
      position: absolute;
      top: 10px;
      right: 10px;
      background: #ff0040;
      color: white;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: bold;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    ">
      90% OFFER<br>
      <small>Min Order â‚¹3000</small>
    </div> -->
    <!-- Offer Badge -->
<!-- <div class="offer-badge">
  ðŸŽ† 90% OFFER ðŸŽ†<br>
  <small>Min Order â‚¹3000</small>
</div>
  </div>

  <div class="container" style="padding-bottom:12px;">
    <div class="filters">
      <select id="categoryFilter"></select>
      <input id="search" type="search" placeholder="Search item nameâ€¦"/>
    </div>
  </div>
</header> -->



  <main class="container layout">
    <section>
      <div id="productGrid" class="grid"></div>
      <div id="emptyState" class="empty" style="display:none;">No items match your search.</div>
    </section>

    <aside class="cart" aria-live="polite">
      <h3>ðŸ›’ Your Cart</h3>
      <div id="cartList" class="cart-list"></div>
      <div class="divider"></div>
      <div class="summary">
        <div class="row"><span>Items</span><strong id="sumItems">0</strong></div>
        <div class="row"><span>MRP Total</span><strong id="sumMrp">â‚¹0</strong></div>
        <div class="row"><span>Discount Total</span><strong id="sumSale">â‚¹0</strong></div>
        <div class="row"><span>You Save</span><strong id="sumSave" style="color:var(--ok)">â‚¹0</strong></div>
      </div>

      <div class="divider"></div>
<div class="summary">
  <label style="display:block; margin-bottom:6px;">
    Name:
    <input id="custName" type="text" placeholder="Enter your name"
      style="width:100%; padding:6px; border-radius:6px; border:1px solid #1f2937; background:#0a0f1c; color:#e2e8f0;" />
  </label>
  <label style="display:block; margin-bottom:6px;">
    Mobile:
    <input id="custPhone" type="text" placeholder="Enter your mobile"
      style="width:100%; padding:6px; border-radius:6px; border:1px solid #1f2937; background:#0a0f1c; color:#e2e8f0;" />
  </label>
  <label style="display:block; margin-bottom:6px;">
    Address:
    <textarea id="custAddress" placeholder="Enter your address"
      style="width:100%; padding:6px; border-radius:6px; border:1px solid #1f2937; background:#0a0f1c; color:#e2e8f0;"></textarea>
  </label>
</div>



      <div class="divider"></div>
      <div class="row" style="gap:8px">
        <button id="clearCart" class="btn btn-ghost" title="Remove all">Clear</button>
        <button id="placeOrder" class="btn btn-primary" style="flex:1">Place Order on WhatsApp</button>
      </div>
      <div class="row" style="margin-top:8px;gap:8px">
        <button id="downloadPdf" class="btn btn-ghost" style="flex:1">Download Order PDF</button>
        <button id="placeOrderWithPdf" class="btn btn-primary" style="flex:1">
    Place Order on WhatsApp (with PDF)
  </button>
      </div>
      <!-- <small class="muted">Orders go to WhatsApp: <strong>+91 81110 87914</strong></small> -->
    </aside>
  </main>

  <!-- <div id="admin" class="container" style="margin-top:24px">
    <h3>Admin â€“ Bulk Import (CSV)</h3>
    <p class="muted">Paste CSV with headers: <code>name,category,unit,mrp,sale</code>. One item per row.</p>
    <textarea id="csvInput" rows="6" style="width:100%;padding:10px;border-radius:10px;border:1px solid #1f2937;background:#0b1220;color:var(--text)" placeholder="Example:\n10 CM ELECTRIC SPARKLERS,SPARKLERS,1 BOX,150,135\nCHAKKARAM BIG (10 PCS),GROUND CHAKKARAS,1 BOX,300,270"></textarea>
    <div class="row" style="margin-top:8px;gap:8px">
      <button id="importCsv" class="btn btn-primary">Import to Catalog</button>
      <button id="exportCsv" class="btn btn-ghost">Export Current Catalog</button>
    </div>
  </div> -->

  <footer>
    <div class="container">Â© 2025 ABS Crackers World â€¢ Sivakasi â€¢ Call: 80720 98251 / 95971 89599 / 82487 10751</div>
  </footer>

  <div id="toast" class="toast"></div>

  <!-- âœ… jsPDF (no integrity attribute to avoid blocking) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf-font@1.0.0/noto-sans.js"></script>


<script>
document.addEventListener("DOMContentLoaded", () => {
  // --- Data: Starter catalog ---
  const STARTER_ITEMS = [

  {id:1, name:"10 CM ELECTRIC SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:120, sale:12, img:"https://i.postimg.cc/Vk63x2xF/image.png"},
  {id:2, name:"10 CM COLOR SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:150, sale:15, img:"https://i.postimg.cc/RFYd2Jgz/image.png"},
  {id:3, name:"10 CM GREEN SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:180, sale:18, img:"https://i.postimg.cc/DzLb7JfT/image.png"},
  {id:4, name:"10 CM RED SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:200, sale:20, img:"https://i.postimg.cc/7Z7gZQXd/image.png"},
  {id:5, name:"15 CM ELECTRIC SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:300, sale:30, img:"https://i.postimg.cc/Vk63x2xF/image.png"},
  {id:6, name:"15 CM CRACKLING SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:330, sale:33, img:"https://i.postimg.cc/RFYd2Jgz/image.png"},
  {id:7, name:"15 CM GREEN SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:380, sale:38, img:"https://i.postimg.cc/DzLb7JfT/image.png"},
  {id:8, name:"15 CM RED SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:420, sale:42, img:"https://i.postimg.cc/7Z7gZQXd/image.png"},
  {id:9, name:"30 CM ELECTRIC SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:300, sale:30, img:"https://i.postimg.cc/Vk63x2xF/image.png"},
  {id:10, name:"30 CM CRACKLING SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:330, sale:33, img:"https://i.postimg.cc/RFYd2Jgz/image.png"},
  {id:11, name:"30 CM GREEN SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:380, sale:38, img:"https://i.postimg.cc/DzLb7JfT/image.png"},
  {id:12, name:"30 CM RED SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:420, sale:42, img:"https://i.postimg.cc/7Z7gZQXd/image.png"},
  {id:13, name:"50 CM ELECTRIC SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:1300, sale:130, img:"https://i.postimg.cc/yxXMKTtZ/image.png"},
  {id:14, name:"50 CM COLOR SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:1400, sale:140, img:"https://i.postimg.cc/Z5D1Jn7V/image.png"},
  {id:15, name:"ROTATING SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:1650, sale:165, img:"https://i.postimg.cc/Qx7BQK5W/image.png"},
  {id:16, name:"CHAKKARAM BIG (10 PCS)", category:"GROUND CHAKKARAS", unit:"1 BOX", mrp:250, sale:25, img:"https://i.postimg.cc/MHVQpnmR/image.png"},
  {id:17, name:"CHAKKARAM BIG (25 PCS)", category:"GROUND CHAKKARAS", unit:"1 BOX", mrp:650, sale:65, img:"https://i.postimg.cc/MHVQpnmR/image.png"},
  {id:18, name:"CHAKKARAM SPECIAL", category:"GROUND CHAKKARAS", unit:"1 BOX", mrp:800, sale:80, img:"https://i.postimg.cc/bwJw6GST/image.png"},
  {id:19, name:"CHAKKARAM DELUXE", category:"GROUND CHAKKARAS", unit:"1 BOX", mrp:1000, sale:100, img:"https://i.postimg.cc/MG2gnNwQ/image.png"},
  {id:20, name:"FLOWER POT BIG", category:"FLOWER POT", unit:"1 BOX", mrp:500, sale:50, img:"https://i.postimg.cc/44BKw17q/image.png"},
  {id:21, name:"FLOWER POT SPECIAL", category:"FLOWER POT", unit:"1 BOX", mrp:700, sale:70, img:"https://i.postimg.cc/3xDd85SQ/image.png"},
  {id:22, name:"FLOWER POT ASHOKA", category:"FLOWER POT", unit:"1 BOX", mrp:1000, sale:100, img:"https://i.postimg.cc/3xDd85SQ/image.png"},
  {id:23, name:"FLOWER POT DELUXE", category:"FLOWER POT", unit:"1 BOX", mrp:1500, sale:150, img:"https://i.postimg.cc/FHjNC9Cz/image.png"},
  {id:24, name:"COLOR KOTI", category:"FLOWER POT", unit:"1 BOX", mrp:1700, sale:170, img:"https://i.postimg.cc/FHZssryq/image.png"},
  {id:25, name:"1 1/2 TWINKLING STAR", category:"TWINKLING STAR", unit:"1 BOX", mrp:150, sale:15, img:"https://i.postimg.cc/J7ZHfd72/image.png"},
  {id:26, name:"4\" TWINKLING STAR DELUXE", category:"TWINKLING STAR", unit:"1 BOX", mrp:450, sale:45, img:"https://i.postimg.cc/GhMLVkDf/image.png"},
  {id:27, name:"2 3/4 KURUVI", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:60, sale:6, img:"https://i.postimg.cc/bJBFxBb8/image.png"},
  {id:28, name:"3 1/2 LAKSHMI", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:150, sale:15, img:"https://i.postimg.cc/C5bXw4Bg/image.png"},
  {id:29, name:"4\" PARROT", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:200, sale:20, img:"https://i.postimg.cc/MKQKQkR6/image.png"},
  {id:30, name:"4\" DELUXE HULK", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:250, sale:25, img:"https://i.postimg.cc/PxCNVCLZ/image.png"},
  {id:31, name:"4\" GOLD LAKSHMI DLX", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:250, sale:25, img:"https://i.postimg.cc/1XRwzm43/image.png"},
  {id:32, name:"5\" JALLIKATTU DLX", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:350, sale:35, img:"https://i.postimg.cc/DZkc73qS/image.png"},
  {id:33, name:"BULLET (FOILS BOMB)", category:"BOMB", unit:"1BOX", mrp:250, sale:25, img:"https://i.postimg.cc/L41z33qm/image.png"},
  {id:34, name:"HYDRO BOMB CLASSIC", category:"BOMB", unit:"1BOX", mrp:500, sale:50, img:"https://i.postimg.cc/rmsjswvw/image.png"},
  {id:35, name:"HYDROGEN BOMB", category:"BOMB", unit:"1 BOX", mrp:700, sale:70, img:"https://i.postimg.cc/g0jhXVFF/image.png"},
  {id:36, name:"DINOSAUR BOMB", category:"BOMB", unit:"1BOX", mrp:1100, sale:110, img:"https://i.postimg.cc/Z57BSW9f/image.png"},
  {id:37, name:"SINDHU BOMB DLX", category:"BOMB", unit:"1 BOX", mrp:1500, sale:150, img:"https://i.postimg.cc/QMy4p7gT/image.png"},
  {id:38, name:"BADA BOMB ULTRA DLX", category:"GIANT & DELUXE", unit:"1BOX", mrp:2750, sale:275, img:"https://i.postimg.cc/gcQxf2sH/image.png"},
  {id:39, name:"28 GIANT", category:"GIANT & DELUXE", unit:"1 PKT", mrp:220, sale:22, img:"https://i.postimg.cc/2yRf7Mdh/image.png"},
  {id:40, name:"56 GIANT", category:"GIANT & DELUXE", unit:"1 PKT", mrp:440, sale:44, img:"https://i.postimg.cc/x8SWzHYP/image.png"},
  {id:41, name:"50 DELUXE", category:"GIANT & DELUXE", unit:"1 PKT", mrp:1000, sale:100, img:"https://i.postimg.cc/Mp43BRmj/image.png"},
  {id:42, name:"4\" 100 MEGA DELUXE", category:"GIANT & DELUXE", unit:"1 PKT", mrp:2000, sale:200, img:"https://i.postimg.cc/ZncDvMwT/image.png"},
  {id:43, name:"1K", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:1200, sale:120, img:"https://i.postimg.cc/s2QRt7cV/image.png"},
  {id:44, name:"2K", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:3000, sale:300, img:"https://i.postimg.cc/Cx92ntGg/image.png"},
  {id:45, name:"5K", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:7000, sale:700, img:"https://i.postimg.cc/8zSQz4vc/image.png"},
  {id:46, name:"10K", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:16000, sale:1600, img:"https://i.postimg.cc/gJMByqrV/image.png"},
  {id:47, name:"1K (BRAND)", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:3500, sale:350, img:"https://i.postimg.cc/wT7F52TT/image.png"},
  {id:48, name:"2K (BRAND)", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:6000, sale:600, img:"https://i.postimg.cc/CKYj2sY8/image.png"},
  {id:49, name:"5K (BRAND)", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:14000, sale:1400, img:"https://i.postimg.cc/zD9pjWLC/image.png"},
  {id:50, name:"10K (BRAND)", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:25000, sale:2500, img:"https://i.postimg.cc/fL178nbz/image.png"},
  {id:51, name:"SKY SHOT", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:400, sale:40, img:"https://i.postimg.cc/3xvfg1JQ/image.png"},
  {id:52, name:"2\" ARIAL FANCY", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:900, sale:90, img:"https://i.postimg.cc/nhPBTfrX/image.png"},
  {id:53, name:"2\" ARIAL FANCY (3 PCS)", category:"MEGA FANCY OUT", unit:"3 PCS", mrp:2200, sale:220, img:"https://i.postimg.cc/PJXCTSNG/image.png"},
  {id:54, name:"3 1/2 ARIAL FANCY", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:2500, sale:250, img:"https://i.postimg.cc/N0CzmkK1/image.png"},
  {id:55, name:"3 1/2 GUN OUT (ULTRA SOUND)", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:2800, sale:280, img:"https://i.postimg.cc/R0hPSJgq/image.png"},
  {id:56, name:"4\" ARIAL FANCY", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:3500, sale:350, img:"https://i.postimg.cc/tJ3kS34v/image.png"},
  {id:57, name:"4\" PIPE (ULTRA SHOW)", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:5000, sale:500, img:"https://i.postimg.cc/8cSB67mR/image.png"},
  {id:58, name:"5\" PIPE FANCY", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:7000, sale:700, img:"https://i.postimg.cc/wvKDC1PC/image.png"},
  {id:59, name:"5\" FANCY (ULTRA SHOW)", category:"MEGA FANCY OUT", unit:"2 PCS", mrp:15000, sale:1500, img:"https://i.postimg.cc/DZByqDqx/image.png"},
  {id:60, name:"12 SHOT", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:1200, sale:120, img:"https://i.postimg.cc/GhZqhDP7/image.png"},
  {id:61, name:"25 SHOT", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:2100, sale:210, img:"https://i.postimg.cc/nzPqS80R/image.png"},
  {id:62, name:"30 SHOT MULTI COLOUR (GOLD)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:3000, sale:300, img:"https://i.postimg.cc/k5R1vcJd/image.png"},
  {id:63, name:"60 SHOT MULTI COLOUR (GOLD)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:7500, sale:750, img:"https://i.postimg.cc/ryNhjzkz/image.png"},
  {id:64, name:"120 SHOT MULTI COLOUR (GOLD)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:15000, sale:1500, img:"https://i.postimg.cc/L593wBp5/image.png"},
  {id:65, name:"240 SHOT MULTI COLOUR (GOLD)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:26000, sale:2600, img:"https://i.postimg.cc/prmxKdVd/image.png"},
  {id:66, name:"30 SHOT MULTI COLOUR (PREMIUM)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:5000, sale:500, img:"https://i.postimg.cc/8cZmSJpH/image.png"},
  {id:67, name:"60 SHOT MULTI COLOUR (PREMIUM)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:11000, sale:1100, img:"https://i.postimg.cc/3JWgGwrs/image.png"},
  {id:68, name:"120 SHOT MULTI COLOUR (PREMIUM)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:22000, sale:2200, img:"https://i.postimg.cc/jq3fRr6Z/image.png"},
  {id:69, name:"240 SHOT MULTI COLOUR (PREMIUM)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:30000, sale:3000, img:"https://i.postimg.cc/tgm9JPyc/image.png"},
  {id:70, name:"KITKAT", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:250, sale:25, img:"https://i.postimg.cc/GtGMYJCm/image.png"},
  {id:71, name:"SNAKE TABLET", category:"FANCY FOUNTAINS", unit:"1 PKT", mrp:250, sale:25, img:"https://i.postimg.cc/q7WXLhQh/image.png"},
  {id:72, name:"BUTTERFLY (10 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:600, sale:60, img:"https://i.postimg.cc/15MGdYJZ/image.png"},
  {id:73, name:"GANGA JAMUNA", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:800, sale:80, img:"https://i.postimg.cc/wTBy1xcS/image.png"},
  {id:74, name:"TOM & JERRY", category:"FANCY FOUNTAINS", unit:"5 PCS", mrp:1600, sale:160, img:"https://i.postimg.cc/KYt461xg/image.png"},
  {id:75, name:"MASTER TREAT CRACKLING", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1000, sale:100, img:"https://i.postimg.cc/5ySGYdLt/image.png"},
  {id:76, name:"DRONE", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:800, sale:80, img:"https://i.postimg.cc/d1psDvsK/image-removebg-preview.jpg"},
  {id:77, name:"DANCING BAMBARAM (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1000, sale:100, img:"https://i.postimg.cc/pd7bJZgf/image.png"},
  {id:78, name:"BINGO SHOWER (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1100, sale:110, img:"https://i.postimg.cc/CMbTbbJ8/image.png"},
  {id:79, name:"TIN BEER (RED, GREEN, CRACKLING)", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:900, sale:90, img:"https://i.postimg.cc/wjCQ5Rwt/image-removebg-preview-1.jpg"},
  {id:80, name:"GOLDEN POPS (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1200, sale:120, img:"https://i.postimg.cc/ZnWWDVRJ/image.png"},
  {id:81, name:"PEACOCK (RED, GREEN, GOLD)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1500, sale:150, img:"https://i.postimg.cc/6p8N2gPW/image-removebg-preview-2.jpg"},
  {id:82, name:"PENTA FANCY (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1500, sale:150, img:"https://i.postimg.cc/Wb4BCxTG/image.png"},
  {id:83, name:"RAINBOW COLOUR SMOKE (3 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1800, sale:180, img:"https://i.postimg.cc/T2tSVQgp/image.png"},
  {id:84, name:"MEGA SIREN (3 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2000, sale:200, img:"https://i.postimg.cc/NjBpZH1W/image.png"},
  {id:85, name:"SILVER MOON", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2000, sale:200, img:"https://i.postimg.cc/zXSkwG9p/image.png"},
  {id:86, name:"PHOTO FLASH (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:700, sale:70, img:"https://i.postimg.cc/nrTCzgPK/image.png"},
  {id:87, name:"COCKFITE CRACKLING (2 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2200, sale:220, img:"https://i.postimg.cc/fTB8nbBy/image.png"},
  {id:88, name:"WELCOME ANGEL", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:1750, sale:175, img:"https://i.postimg.cc/J465Y2zB/image.png"},
  {id:89, name:"TRICOLOUR FOUNTAIN (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2500, sale:250, img:"https://i.postimg.cc/kMjS7t30/image.png"},
  {id:90, name:"FIRE EGG (2 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1500, sale:150, img:"https://i.postimg.cc/0QVz5h3Y/image.png"},
  {id:91, name:"HANUMAN KADA", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:1500, sale:150, img:"https://i.postimg.cc/0y7rKzF2/image.png"},
  {id:92, name:"GUITAR", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2200, sale:220, img:"https://i.postimg.cc/y8f6Z0nK/image-removebg-preview-3.jpg"},
  {id:93, name:"WATER QUEEN (COLD PYRO)", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:3500, sale:350, img:"https://i.postimg.cc/fyZQFb55/image.png"},
  {id:94, name:"BADA PEACOCK", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:3000, sale:300, img:"https://i.postimg.cc/BbJRpVQV/image.png"},
  {id:95, name:"MAGIC SHOW MONEY PAPER (2 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2000, sale:200, img:"https://i.postimg.cc/VsHFDh60/image.png"},
  {id:96, name:"PAPER BOMB 1/4 KG", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:450, sale:45, img:"https://i.postimg.cc/rwyxTCK2/image.png"},
  {id:97, name:"PAPER BOMB 1/2 KG", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:900, sale:90, img:"https://i.postimg.cc/3wVv2s93/image.png"},
  {id:98, name:"PAPER BOMB 1 KG", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:1800, sale:180, img:"https://i.postimg.cc/0jdKRbvN/image.png"},
  {id:99, name:"RED BIJILI 50 PCS (GOLD PKT)", category:"BIJILI", unit:"1PKT", mrp:200, sale:20, img:"https://i.postimg.cc/8kq4kDwT/image.png"},
  {id:100, name:"RED BIJILI 100 PCS (GOLD PKT)", category:"BIJILI", unit:"1PKT", mrp:400, sale:40, img:"https://i.postimg.cc/HL4RXnZ0/image.png"},
  {id:101, name:"BABY ROCKET", category:"ROCKET", unit:"1 BOX", mrp:300, sale:30, img:"https://i.postimg.cc/cCK9JBvH/image.png"},
  {id:102, name:"BOMB ROCKET", category:"ROCKET", unit:"1 BOX", mrp:600, sale:60, img:"https://i.postimg.cc/MGMvdcfB/image.png"},
  {id:103, name:"LUNIC ROCKET", category:"ROCKET", unit:"1 BOX", mrp:1200, sale:120, img:"https://i.postimg.cc/13L9Rv4g/image.png"},
  {id:104, name:"WHISTLING ROCKET", category:"ROCKET", unit:"1 BOX", mrp:1500, sale:150, img:"https://i.postimg.cc/j5xBRf6w/image.png"},
  {id:105, name:"GIFT BOX", category:"GIFT BOX", unit:"18 ITEMS", mrp:2000, sale:200, img:"https://i.postimg.cc/W3ZXZ6Gf/image.png"},
  {id:106, name:"GIFT BOX", category:"GIFT BOX", unit:"21 ITEMS", mrp:3000, sale:300, img:"https://i.postimg.cc/FspG0KSm/image.png"},
  {id:107, name:"GIFT BOX", category:"GIFT BOX", unit:"30 ITEMS", mrp:5000, sale:500, img:"https://i.postimg.cc/Zn32Tzsn/image.png"},
  {id:108, name:"GIFT BOX", category:"GIFT BOX", unit:"40 ITEMS", mrp:7000, sale:700, img:"https://i.postimg.cc/pTMKwNjq/image.png"},
  {id:109, name:"GIFT BOX", category:"GIFT BOX", unit:"50 ITEMS", mrp:9000, sale:900, img:"https://i.postimg.cc/tCvWXnP1/image.png"},
  {id:110, name:"ANNAM", category:"MATCH BOX", unit:"1 BOX", mrp:600, sale:60, img:"https://i.postimg.cc/xjh9n08f/image.png"},
  {id:111, name:"HERO", category:"MATCH BOX", unit:"1 BOX", mrp:1000, sale:100, img:"https://i.postimg.cc/LsxM7SGM/image.png"},
  {id:112, name:"ROYAL SUPER MEGA", category:"MATCH BOX", unit:"1 BOX", mrp:1500, sale:150, img:"https://i.postimg.cc/W3JTJKfL/image-removebg-preview-4.jpg"},
  {id:113, name:"GUN SMALL", category:"GUN", unit:"1 PIECE", mrp:300, sale:30, img:"https://i.postimg.cc/X7n6Vp30/image.png"},
  {id:114, name:"GUN MEDIUM", category:"GUN", unit:"1 PIECE", mrp:500, sale:50, img:"https://i.postimg.cc/2ywJq7mN/image.png"},
  {id:115, name:"GUN BIG", category:"GUN", unit:"1 PIECE", mrp:800, sale:80, img:"https://i.postimg.cc/vZ1qMs1s/image.png"},
  {id:116, name:"GUN BADA BIG", category:"GUN", unit:"1 PIECE", mrp:1200, sale:120, img:"https://i.postimg.cc/gjTVBxH6/image.png"},
  {id:117, name:"ROLL CAP", category:"GUN", unit:"1 PIECE", mrp:100, sale:10, img:"https://i.postimg.cc/hjxLfZSf/image.png"},
  {id:118, name:"RING CAP", category:"GUN", unit:"1 PKT", mrp:80, sale:8, img:"https://i.postimg.cc/bvg2BGzN/image.png"},
  {id:119, name:"POP-POP", category:"GUN", unit:"1 BOX", mrp:100, sale:10, img:"https://i.postimg.cc/t4StfVSC/image.png"}

  

//     {id:1, name:"10 CM ELECTRIC SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:120, sale:12},
//   {id:2, name:"10 CM COLOR SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:150, sale:15},
//   {id:3, name:"10 CM GREEN SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:180, sale:18},
//   {id:4, name:"10 CM RED SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:200, sale:20},
//   {id:5, name:"15 CM ELECTRIC SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:300, sale:30},
//   {id:6, name:"15 CM CRACKLING SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:330, sale:33},
//   {id:7, name:"15 CM GREEN SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:380, sale:38},
//   {id:8, name:"15 CM RED SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:420, sale:42},
//   {id:9, name:"30 CM ELECTRIC SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:300, sale:30},
//   {id:10, name:"30 CM CRACKLING SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:330, sale:33},
//   {id:11, name:"30 CM GREEN SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:380, sale:38},
//   {id:12, name:"30 CM RED SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:420, sale:42},
//   {id:13, name:"50 CM ELECTRIC SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:1300, sale:130},
//   {id:14, name:"50 CM COLOR SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:1400, sale:140},
//   {id:15, name:"ROTATING SPARKLERS", category:"SPARKLERS", unit:"1 BOX", mrp:1650, sale:165},
//   {id:16, name:"CHAKKARAM BIG (10 PCS)", category:"GROUND CHAKKARAS", unit:"1 BOX", mrp:250, sale:25},
//   {id:17, name:"CHAKKARAM BIG (25 PCS)", category:"GROUND CHAKKARAS", unit:"1 BOX", mrp:650, sale:65},
//   {id:18, name:"CHAKKARAM SPECIAL", category:"GROUND CHAKKARAS", unit:"1 BOX", mrp:800, sale:80},
//   {id:19, name:"CHAKKARAM DELUXE", category:"GROUND CHAKKARAS", unit:"1 BOX", mrp:1000, sale:100},
//   {id:20, name:"FLOWER POT BIG", category:"FLOWER POT", unit:"1 BOX", mrp:500, sale:50},
//   {id:21, name:"FLOWER POT SPECIAL", category:"FLOWER POT", unit:"1 BOX", mrp:700, sale:70},
//   {id:22, name:"FLOWER POT ASHOKA", category:"FLOWER POT", unit:"1 BOX", mrp:1000, sale:100},
//   {id:23, name:"FLOWER POT DELUXE", category:"FLOWER POT", unit:"1 BOX", mrp:1500, sale:150},
//   {id:24, name:"COLOR KOTI", category:"FLOWER POT", unit:"1 BOX", mrp:1700, sale:170},
//   {id:25, name:"1 1", category:"TWINKLING STAR", unit:"1 BOX", mrp:150, sale:15},
//   {id:26, name:"4\" TWINKLING STAR DELUXE", category:"TWINKLING STAR", unit:"1 BOX", mrp:450, sale:45},
//   {id:27, name:"2 3", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:60, sale:6},
//   {id:28, name:"3 1", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:150, sale:15},
//   {id:29, name:"4\" PARROT", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:200, sale:20},
//   {id:30, name:"4\" DELUXE HULK", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:250, sale:25},
//   {id:31, name:"4\" GOLD LAKSHMI DLX", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:250, sale:25},
//   {id:32, name:"5\" JALLIKATTU DLX", category:"ONE SOUND CRACKERS", unit:"1 PKT", mrp:350, sale:35},
//   {id:33, name:"BULLET (FOILS BOMB)", category:"BOMB", unit:"1BOX", mrp:250, sale:25},
//   {id:34, name:"HYDRO BOMB CLASSIC", category:"BOMB", unit:"1BOX", mrp:500, sale:50},
//   {id:35, name:"HYDROGEN BOMB", category:"BOMB", unit:"1 BOX", mrp:700, sale:70},
//   {id:36, name:"DINOSAUR BOMB", category:"BOMB", unit:"1BOX", mrp:1100, sale:110},
//   {id:37, name:"SINDHU BOMB DLX", category:"BOMB", unit:"1 BOX", mrp:1500, sale:150},
//   {id:38, name:"BADA BOMB ULTRA DLX", category:"GIANT & DELUXE", unit:"1BOX", mrp:2750, sale:275},
//   {id:39, name:"28 GIANT", category:"GIANT & DELUXE", unit:"1 PKT", mrp:220, sale:22},
//   {id:40, name:"56 GIANT", category:"GIANT & DELUXE", unit:"1 PKT", mrp:440, sale:44},
//   {id:41, name:"50 DELUXE", category:"GIANT & DELUXE", unit:"1 PKT", mrp:1000, sale:100},
//   {id:42, name:"4\" 100 MEGA DELUXE", category:"GIANT & DELUXE", unit:"1 PKT", mrp:2000, sale:200},
//   {id:43, name:"1K", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:1200, sale:120},
//   {id:44, name:"2K", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:3000, sale:300},
//   {id:45, name:"5K", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:7000, sale:700},
//   {id:46, name:"10K", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:16000, sale:1600},
//   {id:47, name:"1K (BRAND)", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:3500, sale:350},
//   {id:48, name:"2K (BRAND)", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:6000, sale:600},
//   {id:49, name:"5K (BRAND)", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:14000, sale:1400},
//   {id:50, name:"10K (BRAND)", category:"RED MAGIC CRACKERS", unit:"1 BOX", mrp:25000, sale:2500},
//   {id:51, name:"SKY SHOT", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:400, sale:40},
//   {id:52, name:"2\" ARIAL FANCY", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:900, sale:90},
//   {id:53, name:"2\" ARIAL FANCY (3 PCS)", category:"MEGA FANCY OUT", unit:"3 PCS", mrp:2200, sale:220},
//   {id:54, name:"3 1", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:2500, sale:250},
//   {id:55, name:"3 1", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:2800, sale:280},
//   {id:56, name:"4\" ARIAL FANCY", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:3500, sale:350},
//   {id:57, name:"4\" PIPE (ULTRA SHOW)", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:5000, sale:500},
//   {id:58, name:"5\" PIPE FANCY", category:"MEGA FANCY OUT", unit:"1 PCS", mrp:7000, sale:700},
//   {id:59, name:"5\" FANCY (ULTRA SHOW)", category:"MEGA FANCY OUT", unit:"2 PCS", mrp:15000, sale:1500},
//   {id:60, name:"12 SHOT", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:1200, sale:120},
//   {id:61, name:"25 SHOT", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:2100, sale:210},
//   {id:62, name:"30 SHOT MULTI COLOUR (GOLD)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:3000, sale:300},
//   {id:63, name:"60 SHOT MULTI COLOUR (GOLD)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:7500, sale:750},
//   {id:64, name:"120 SHOT MULTI COLOUR (GOLD)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:15000, sale:1500},
//   {id:65, name:"240 SHOT MULTI COLOUR (GOLD)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:26000, sale:2600},
//   {id:66, name:"30 SHOT MULTI COLOUR (PREMIUM)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:5000, sale:500},
//   {id:67, name:"60 SHOT MULTI COLOUR (PREMIUM)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:11000, sale:1100},
//   {id:68, name:"120 SHOT MULTI COLOUR (PREMIUM)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:22000, sale:2200},
//   {id:69, name:"240 SHOT MULTI COLOUR (PREMIUM)", category:"MULTI COLOUR SKY SHOT", unit:"1 BOX", mrp:30000, sale:3000},
//   {id:70, name:"KITKAT", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:250, sale:25},
//   {id:71, name:"SNAKE TABLET", category:"FANCY FOUNTAINS", unit:"1 PKT", mrp:250, sale:25},
//   {id:72, name:"BUTTERFLY (10 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:600, sale:60},
//   {id:73, name:"GANGA JAMUNA", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:800, sale:80},
//   {id:74, name:"TOM & JERRY", category:"FANCY FOUNTAINS", unit:"5 PCS", mrp:1600, sale:160},
//   {id:75, name:"MASTER TREAT CRACKLING", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1000, sale:100},
//   {id:76, name:"DRONE", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:800, sale:80},
//   {id:77, name:"DANCING BAMBARAM (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1000, sale:100},
//   {id:78, name:"BINGO SHOWER (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1100, sale:110},
//   {id:79, name:"TIN BEER (RED, GREEN, CRACKLING)", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:900, sale:90},
//   {id:80, name:"GOLDEN POPS (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1200, sale:120},
//   {id:81, name:"PEACOCK (RED, GREEN, GOLD)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1500, sale:150},
//   {id:82, name:"PENTA FANCY (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1500, sale:150},
//   {id:83, name:"RAINBOW COLOUR SMOKE (3 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1800, sale:180},
//   {id:84, name:"MEGA SIREN (3 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2000, sale:200},
//   {id:85, name:"SILVER MOON", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2000, sale:200},
//   {id:86, name:"PHOTO FLASH (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:700, sale:70},
//   {id:87, name:"COCKFITE CRACKLING (2 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2200, sale:220},
//   {id:88, name:"WELCOME ANGEL", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:1750, sale:175},
//   {id:89, name:"TRICOLOUR FOUNTAIN (5 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2500, sale:250},
//   {id:90, name:"FIRE EGG (2 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:1500, sale:150},
//   {id:91, name:"HANUMAN KADA", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:1500, sale:150},
//   {id:92, name:"GUITAR", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2200, sale:220},
//   {id:93, name:"WATER QUEEN (COLD PYRO)", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:3500, sale:350},
//   {id:94, name:"BADA PEACOCK", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:3000, sale:300},
//   {id:95, name:"MAGIC SHOW MONEY PAPER (2 PCS)", category:"FANCY FOUNTAINS", unit:"1 BOX", mrp:2000, sale:200},
//   {id:96, name:"PAPER BOMB 1/4 KG", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:450, sale:45},
//   {id:97, name:"PAPER BOMB 1/2 KG", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:900, sale:90},
//   {id:98, name:"PAPER BOMB 1 KG", category:"FANCY FOUNTAINS", unit:"1 PCS", mrp:1800, sale:180},
//   {id:99, name:"RED BIJILI 50 PCS (GOLD PKT)", category:"BIJILI", unit:"1PKT", mrp:200, sale:20},
//   {id:100, name:"RED BIJILI 100 PCS (GOLD PKT)", category:"BIJILI", unit:"1PKT", mrp:400, sale:40},
//   {id:101, name:"BABY ROCKET", category:"ROCKET", unit:"1 BOX", mrp:300, sale:30},
//   {id:102, name:"BOMB ROCKET", category:"ROCKET", unit:"1 BOX", mrp:600, sale:60},
//   {id:103, name:"LUNIC ROCKET", category:"ROCKET", unit:"1 BOX", mrp:1200, sale:120},
//   {id:104, name:"WHISTLING ROCKET", category:"ROCKET", unit:"1 BOX", mrp:1500, sale:150},
//   {id:105, name:"GIFT BOX", category:"GIFT BOX", unit:"18 ITEMS", mrp:2000, sale:200},
//   {id:106, name:"GIFT BOX", category:"GIFT BOX", unit:"21 ITEMS", mrp:3000, sale:300},
//   {id:107, name:"GIFT BOX", category:"GIFT BOX", unit:"30 ITEMS", mrp:5000, sale:500},
//   {id:108, name:"GIFT BOX", category:"GIFT BOX", unit:"40 ITEMS", mrp:7000, sale:700},
//   {id:109, name:"GIFT BOX", category:"GIFT BOX", unit:"50 ITEMS", mrp:9000, sale:900},
//   {id:110, name:"ANNAM", category:"MATCH BOX", unit:"1 BOX", mrp:600, sale:60},
//   {id:111, name:"HERO", category:"MATCH BOX", unit:"1 BOX", mrp:1000, sale:100},
//   {id:112, name:"ROYAL SUPER MEGA", category:"MATCH BOX", unit:"1 BOX", mrp:1500, sale:150},
//   {id:113, name:"GUN SMALL", category:"GUN", unit:"1 PIECE", mrp:300, sale:30},
//   {id:114, name:"GUN MEDIUM", category:"GUN", unit:"1 PIECE", mrp:500, sale:50},
//   {id:115, name:"GUN BIG", category:"GUN", unit:"1 PIECE", mrp:800, sale:80},
//   {id:116, name:"GUN BADA BIG", category:"GUN", unit:"1 PIECE", mrp:1200, sale:120},
//   {id:117, name:"ROLL CAP", category:"GUN", unit:"1 PIECE", mrp:100, sale:10},
//   {id:118, name:"RING CAP", category:"GUN", unit:"1 PKT", mrp:80, sale:8},
//   {id:119, name:"POP-POP", category:"GUN", unit:"1 BOX", mrp:100, sale:10}
  ];

  // --- State ---
  const STORAGE_KEY = 'abs_crackers_catalog_v6';
  const CART_KEY = 'abs_crackers_cart_v1';

  const Catalog = {
    list: [],
    load(){
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          const parsed = JSON.parse(saved);
          if (Array.isArray(parsed) && parsed.length > 0) {
            this.list = parsed;
          } else {
            this.list = STARTER_ITEMS;
            this.save();
          }
        } else {
          this.list = STARTER_ITEMS;
          this.save();
        }
      } catch (e) {
        console.error("Catalog load failed, using starter items:", e);
        this.list = STARTER_ITEMS;
        this.save();
      }
      this.list = this.list.map((it, idx)=>({id: it.id ?? idx+1, ...it}));
    },
    save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(this.list)); }
  };

  console.log("First item with image:", Catalog.list[0]);

  const Cart = {
    items: {},
    load(){
      try {
        this.items = JSON.parse(localStorage.getItem(CART_KEY) || '{}');
        // cleanup invalid IDs
        for (const id of Object.keys(this.items)) {
          if (!Catalog.list.find(x => x.id == id)) delete this.items[id];
        }
        this.save();
      } catch (e) {
        console.error("Cart load failed, resetting:", e);
        this.items = {}; this.save();
      }
    },
    save(){ localStorage.setItem(CART_KEY, JSON.stringify(this.items)); },
    add(id, qty=1){ this.items[id] = (this.items[id]||0) + qty; this.save(); renderCart(); toast('Added to cart'); },
    set(id, qty){ if(qty<=0) delete this.items[id]; else this.items[id]=qty; this.save(); renderCart(); },
    clear(){ this.items={}; this.save(); renderCart(); }
  };

  // --- UI helpers ---
  const el = (sel)=>document.querySelector(sel);
  const fmt = (n)=>'â‚¹'+(n||0).toLocaleString('en-IN');
  const toast = (msg)=>{ const t=el('#toast'); t.textContent=msg; t.style.display='block'; setTimeout(()=>t.style.display='none', 1400); };

  // --- Render Catalog ---
  function renderFilters(){
    const categories = Array.from(new Set(Catalog.list.map(x=>x.category))).sort();
    const sel = el('#categoryFilter');
    sel.innerHTML = `<option value="">All categories</option>` + categories.map(c=>`<option>${c}</option>`).join('');
  }
  function filteredItems(){
    const q = el('#search').value.trim().toLowerCase();
    const cat = el('#categoryFilter').value;
    return Catalog.list.filter(it=>{
      const okCat = !cat || it.category===cat;
      const okQ = !q || it.name.toLowerCase().includes(q);
      return okCat && okQ;
    });
  }

  function renderGrid(){
  const grid = el('#productGrid');
  const items = filteredItems();

  grid.innerHTML = items.map(it=>{
    const save = (it.mrp||0) - (it.sale||0);
    return `
      <div class="card" role="group" aria-label="${it.name}">
        
        <!-- Product Image (fixed square thumbnail) -->
        <div class="img-box" style="width:100%;height:150px;margin-bottom:8px;overflow:hidden;border-radius:12px;">
          <img src="${it.img}" alt="${it.name}"
               style="width:100%;height:100%;object-fit:cover;display:block;"/>
        </div>

        <!-- Category & Unit -->
        <div class="row">
          <div class="pill">${it.category}</div>
          <div class="muted">${it.unit||''}</div>
        </div>

        <!-- Product Title -->
        <div class="title">${it.name}</div>

        <!-- Price & Savings -->
        <div class="row">
          <div class="price">
            <span class="mrp">${fmt(it.mrp)}</span>
            <span class="sale">${fmt(it.sale)}</span>
          </div>
          <div class="muted">Save ${fmt(save)}</div>
        </div>

        <!-- Quantity & Add to Cart -->
        <div class="row" style="margin-top:auto;gap:8px">
          <div class="qty">
            <button aria-label="decrease" onclick="chgQty(${it.id},-1)">âˆ’</button>
            <input id="q_${it.id}" type="number" min="1" value="1" />
            <button aria-label="increase" onclick="chgQty(${it.id},1)">+</button>
          </div>
          <button class="btn btn-primary" style="flex:1" onclick="addToCart(${it.id})">Add</button>
        </div>

      </div>`;
  }).join('');

  // Empty state toggle
  el('#emptyState').style.display = items.length ? 'none' : 'block';
}


//   function renderGrid(){
//   const grid = el('#productGrid');
//   const items = filteredItems();
//   grid.innerHTML = items.map(it=>{
//     const save = (it.mrp||0)-(it.sale||0);
//     return `
//       <div class="card" role="group" aria-label="${it.name}">
//         <img src="${it.img}" alt="${it.name}"
//              style="width:100%;height:120px;object-fit:cover;border-radius:12px;"/>
//         <div class="row">
//           <div class="pill">${it.category}</div>
//           <div class="muted">${it.unit||''}</div>
//         </div>
//         <div class="title">${it.name}</div>
//         <div class="row">
//           <div class="price">
//             <span class="mrp">${fmt(it.mrp)}</span>
//             <span class="sale">${fmt(it.sale)}</span>
//           </div>
//           <div class="muted">Save ${fmt(save)}</div>
//         </div>
//         <div class="row" style="margin-top:auto;gap:8px">
//           <div class="qty">
//             <button aria-label="decrease" onclick="chgQty(${it.id},-1)">âˆ’</button>
//             <input id="q_${it.id}" type="number" min="1" value="1" />
//             <button aria-label="increase" onclick="chgQty(${it.id},1)">+</button>
//           </div>
//           <button class="btn btn-primary" style="flex:1" onclick="addToCart(${it.id})">Add</button>
//         </div>
//       </div>`;
//   }).join('');
//   el('#emptyState').style.display = items.length? 'none':'block';
// }



//   function renderGrid(){
//     const grid = el('#productGrid');
//     const items = filteredItems();
//     grid.innerHTML = items.map(it=>{
//       const save = (it.mrp||0)-(it.sale||0);
//       return `
//       <div class="card" role="group" aria-label="${it.name}">
//         <div class="row"><div class="pill">${it.category}</div><div class="muted">${it.unit||''}</div></div>
//         <div class="title">${it.name}</div>
//         <div class="row">
//           <div class="price">
//             <span class="mrp">${fmt(it.mrp)}</span>
//             <span class="sale">${fmt(it.sale)}</span>
//           </div>
//           <div class="muted">Save ${fmt(save)}</div>
//         </div>
//         <div class="row" style="margin-top:auto;gap:8px">
//           <div class="qty">
//             <button aria-label="decrease" onclick="chgQty(${it.id},-1)">âˆ’</button>
//             <input id="q_${it.id}" type="number" min="1" value="1" />
//             <button aria-label="increase" onclick="chgQty(${it.id},1)">+</button>
//           </div>
//           <button class="btn btn-primary" style="flex:1" onclick="addToCart(${it.id})">Add</button>
//         </div>
//       </div>`;
//     }).join('');
//     el('#emptyState').style.display = items.length? 'none':'block';
//   }
  function chgQty(id, delta){
    const inp = el('#q_'+id); let v = parseInt(inp.value||'1',10); v = Math.max(1, v+delta); inp.value=v;
  }
  function addToCart(id){
    const q = parseInt(el('#q_'+id)?.value||'1',10); Cart.add(id, q);
  }

  // --- Render Cart ---
  function renderCart(){
    const list = el('#cartList');
    const lines = [];
    let sumItems=0, mrp=0, sale=0;
    for(const [id, qty] of Object.entries(Cart.items)){
      const it = Catalog.list.find(x=>x.id==id);
      if(!it) continue;
      const lineMrp = (it.mrp||0)*qty; const lineSale=(it.sale||0)*qty;
      sumItems += qty; mrp += lineMrp; sale += lineSale;
      lines.push(`
        <div class="cart-item">
          <div>
            <div class="name">${it.name}</div>
            <div class="meta">${it.unit||''} â€¢ ${it.category}</div>
            <div class="meta">${qty} Ã— ${fmt(it.sale)} <span style="margin-left:6px">(MRP ${fmt(it.mrp)})</span></div>
          </div>
          <div style="text-align:right">
            <div class="amt">${fmt(lineSale)}</div>
            <div class="muted">Save ${fmt(lineMrp-lineSale)}</div>
            <div class="qty" style="margin-top:6px;justify-content:flex-end">
              <button onclick="Cart.set(${id}, (Cart.items[${id}]||0)-1)">âˆ’</button>
              <input type="number" min="0" value="${qty}" onchange="Cart.set(${id}, parseInt(this.value||'0',10))"/>
              <button onclick="Cart.set(${id}, (Cart.items[${id}]||0)+1)">+</button>
            </div>
          </div>
        </div>`);
    }
    list.innerHTML = lines.join('') || `<div class="empty">Your cart is empty.</div>`;
    el('#sumItems').textContent = sumItems;
    el('#sumMrp').textContent = fmt(mrp);
    el('#sumSale').textContent = fmt(sale);
    el('#sumSave').textContent = fmt(mrp-sale);
  }

  // --- WhatsApp Order ---
  function buildOrderText(){
    const lines = [];
    lines.push('*ABS Crackers Order*','');
    for(const [id, qty] of Object.entries(Cart.items)){
      const it = Catalog.list.find(x=>x.id==id); if(!it) continue;
      lines.push(`â€¢ ${it.name} (${it.unit}) â€” Qty ${qty} â€” ${fmt(it.sale)} each`);
    }
    lines.push('');
    lines.push(`MRP Total: ${el('#sumMrp').textContent}`);
    lines.push(`Discount Total: ${el('#sumSale').textContent}`);
    lines.push(`You Save: ${el('#sumSave').textContent}`);
    lines.push('');
    lines.push('Customer Name: ____');
    lines.push('Delivery/Pickup: ____');
    lines.push('Address/Notes: ____');
    return lines.join('\n');
  }
  function openWhatsApp(){
    const number = '918111087914';
    const text = encodeURIComponent(buildOrderText());
    window.open(`https://wa.me/${number}?text=${text}`, '_blank');
  }

  // --- PDF Generation ---

  // final

  async function downloadOrderPdf() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  // --- Load ABS Logo ---
  const logo = new Image();
  logo.crossOrigin = "anonymous";
  logo.src = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
  await new Promise(resolve => { logo.onload = resolve; });

  // --- Load God Image ---
  const godImg = new Image();
  godImg.crossOrigin = "anonymous";
  godImg.src = "https://i.postimg.cc/MGmbtLv7/abs-god.webp";
  await new Promise(resolve => { godImg.onload = resolve; });

  // --- Place Logo (left corner) ---
  doc.addImage(logo, "JPEG", 14, 10, 30, 30);

//   // --- Place God Image (right corner) ---
//   doc.addImage(godImg, "WEBP", 165, 10, 30, 30);

//   // --- Header Text (shifted to center-left) ---
//   doc.setFontSize(16);
//   doc.text("ABS Crackers World", 60, 20);
//   doc.setFontSize(10);
//   doc.text("5/288/33, Sivakasi - 626189", 60, 26);
//   doc.text("Contact: +91 80720 98251 / 95971 89599", 60, 32);

//   // --- Invoice Info ---
//   const invoiceNo = "INV-" + Date.now();
//   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
//   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

  // --- Place God Image (right corner) ---
  doc.addImage(godImg, "WEBP", 165, 10, 30, 30);

  // --- Header Text (center-left) ---
  doc.setFontSize(16);
  doc.text("ABS Crackers World", 60, 20);
  doc.setFontSize(10);
  doc.text("5/288/33, Sivakasi - 626189", 60, 26);
  doc.text("Contact: +91 80720 98251 / 95971 89599", 60, 32);

  // --- Invoice Info (shifted lower, below god image) ---
  const invoiceNo = "INV-" + Date.now();
  doc.setFontSize(11);
  doc.text(`Invoice No: ${invoiceNo}`, 150, 48);  // â¬…ï¸ moved down
  doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 54);  // â¬…ï¸ moved down


  // --- Customer Details ---
  const name = document.getElementById('custName')?.value || 'N/A';
  const phone = document.getElementById('custPhone')?.value || 'N/A';
  const addr = document.getElementById('custAddress')?.value || 'N/A';

  doc.setFontSize(12);
  doc.text("Bill To:", 14, 50);
  doc.text(name, 50, 50);
  doc.text("Mobile:", 14, 56);
  doc.text(phone, 50, 56);
  doc.text("Ship To:", 14, 66);
  doc.text(addr, 50, 66);

  // --- Table Data ---
  const rows = [];
  let idx = 1, subtotal = 0;
  for (const [id, qty] of Object.entries(Cart.items)) {
    const it = Catalog.list.find(x => x.id == id);
    if (!it) continue;
    const lineTotal = (it.sale || 0) * qty;
    subtotal += lineTotal;

    const price = fmt(it.sale).replace("â‚¹", "Rs. ");
    const total = fmt(lineTotal).replace("â‚¹", "Rs. ");
    rows.push([idx++, it.name, qty, price, total]);
  }

  // --- AutoTable ---
  doc.autoTable({
    head: [["#", "Product", "Qty", "Price", "Total"]],
    body: rows,
    startY: 80,
    theme: "striped",
    headStyles: { fillColor: [0, 123, 255] },
    styles: { halign: "center" },
    columnStyles: {
      1: { halign: "left" },
      2: { halign: "center" },
      3: { halign: "right" },
      4: { halign: "right" }
    }
  });

  const finalY = doc.lastAutoTable.finalY + 10;

  // --- Total ---
  const subText = fmt(subtotal).replace("â‚¹", "Rs. ");
  doc.setFontSize(14);
  doc.setLineWidth(0.5);
  doc.line(150, finalY - 4, 200, finalY - 4);
  doc.text(`Total: ${subText}`, 200, finalY + 4, { align: "right" });

  // --- Footer ---
  doc.setFontSize(12);
  doc.text("Thank you for your order!", 80, 290);

  // --- Save PDF ---
  doc.save(`Invoice_${invoiceNo}.pdf`);
}


//   async function downloadOrderPdf() {
//   const { jsPDF } = window.jspdf;
//   const doc = new jsPDF();

//   // --- Load Logo from URL ---
//   const img = new Image();
//   img.crossOrigin = "anonymous";
//   img.src = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
//   await new Promise(resolve => { img.onload = resolve; });

//   // Place logo
//   doc.addImage(img, "JPEG", 14, 10, 30, 30);

//   // --- Header ---
//   doc.setFontSize(16);
//   doc.text("ABS Crackers World", 50, 20);
//   doc.setFontSize(10);
//   doc.text("5/288/33, Sivakasi", 50, 26);
//   doc.text("Contact: +91 80720 98251 / 95971 89599", 50, 32);

//   // --- Invoice Info ---
//   const invoiceNo = "INV-" + Date.now();
//   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
//   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

//   // --- Customer Details ---
//   const name = document.getElementById('custName')?.value || 'N/A';
//   const phone = document.getElementById('custPhone')?.value || 'N/A';
//   const addr = document.getElementById('custAddress')?.value || 'N/A';

//   doc.setFontSize(12);

//   // Bill To
//   doc.text("Bill To:", 14, 50);
//   doc.text(name, 50, 50);

//   // Mobile
//   doc.text("Mobile:", 14, 56);
//   doc.text(phone, 50, 56);

//   // Ship To
//   doc.text("Ship To:", 14, 66);
//   doc.text(addr, 50, 66);

//   // --- Table Data ---
//   const rows = [];
//   let idx = 1, subtotal = 0;
//   for (const [id, qty] of Object.entries(Cart.items)) {
//     const it = Catalog.list.find(x => x.id == id);
//     if (!it) continue;
//     const lineTotal = (it.sale || 0) * qty;
//     subtotal += lineTotal;

//     // âœ… Replace â‚¹ with Rs. only for PDF
//     const price = fmt(it.sale).replace("â‚¹", "Rs. ");
//     const total = fmt(lineTotal).replace("â‚¹", "Rs. ");

//     rows.push([idx++, it.name, qty, price, total]);
//   }

//   // --- AutoTable ---
//   doc.autoTable({
//     head: [["#", "Product", "Qty", "Price", "Total"]],
//     body: rows,
//     startY: 80,
//     theme: "striped",
//     headStyles: { fillColor: [0, 123, 255] },
//     styles: { halign: "center" },
//     columnStyles: {
//       1: { halign: "left" },
//       2: { halign: "center" },
//       3: { halign: "right" },
//       4: { halign: "right" }
//     }
//   });

//   const finalY = doc.lastAutoTable.finalY + 10;

//   // --- Total ---
//   const subText = fmt(subtotal).replace("â‚¹", "Rs. ");
//   doc.setFontSize(12);

//   // Separator line before total
//   doc.setLineWidth(0.5);
//   doc.line(150, finalY - 4, 200, finalY - 4);

//   // Total (only, no subtotal)
//   doc.setFontSize(14); // make it stand out
//   doc.text(`Total: ${subText}`, 200, finalY + 4, { align: "right" });

//   // --- Footer ---
//   doc.setFontSize(12);
//   doc.text("Thank you for your order!", 80, 290);

//   // --- Save PDF ---
//   doc.save(`Invoice_${invoiceNo}.pdf`);
// }



//   async function downloadOrderPdf() {
//   const { jsPDF } = window.jspdf;
//   const doc = new jsPDF();

//   // --- Load Logo from URL ---
//   const img = new Image();
//   img.crossOrigin = "anonymous";
//   img.src = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
//   await new Promise(resolve => { img.onload = resolve; });

//   // Place logo
//   doc.addImage(img, "JPEG", 14, 10, 30, 30);

//   // --- Header ---
//   doc.setFontSize(16);
//   doc.text("ABS Crackers World", 50, 20);
//   doc.setFontSize(10);
//   doc.text("5/288/33, Sivakasi - 626189", 50, 26);
//   doc.text("Contact: +91 80720 98251 / 95971 89599", 50, 32);

//   // --- Invoice Info ---
//   const invoiceNo = "INV-" + Date.now();
//   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
//   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

//   // --- Customer Details ---
//   const name = document.getElementById('custName')?.value || 'N/A';
//   const phone = document.getElementById('custPhone')?.value || 'N/A';
//   const addr = document.getElementById('custAddress')?.value || 'N/A';

// //   doc.setFontSize(12);
// //   doc.text("Bill To:", 14, 50);
// //   doc.text(`${name}`, 30, 50);
// //   doc.text(`Mobile: ${phone}`, 30, 56);
// //   doc.text("Ship To:", 14, 66);
// //   doc.text(`${addr}`, 30, 66);
// doc.setFontSize(12);

// // Bill To
// doc.text("Bill To:", 14, 50);
// doc.text(name, 50, 50);

// // Mobile
// doc.text("Mobile:", 14, 56);
// doc.text(phone, 50, 56);

// // Ship To
// doc.text("Ship To:", 14, 66);
// doc.text(addr, 50, 66);


//   // --- Table Data ---
//   const rows = [];
//   let idx = 1, subtotal = 0;
//   for (const [id, qty] of Object.entries(Cart.items)) {
//     const it = Catalog.list.find(x => x.id == id);
//     if (!it) continue;
//     const lineTotal = (it.sale || 0) * qty;
//     subtotal += lineTotal;

//     // âœ… Replace â‚¹ with Rs. only for PDF
//     const price = fmt(it.sale).replace("â‚¹", "Rs. ");
//     const total = fmt(lineTotal).replace("â‚¹", "Rs. ");

//     rows.push([idx++, it.name, qty, price, total]);
//   }

//   // --- AutoTable ---
//   doc.autoTable({
//     head: [["#", "Product", "Qty", "Price", "Total"]],
//     body: rows,
//     startY: 80,
//     theme: "striped",
//     headStyles: { fillColor: [0, 123, 255] },
//     styles: { halign: "center" },
//     columnStyles: {
//       1: { halign: "left" },
//       2: { halign: "center" },
//       3: { halign: "right" },
//       4: { halign: "right" }
//     }
//   });

//   const finalY = doc.lastAutoTable.finalY + 10;

//   // --- Totals ---
//   // --- Totals ---
// const subText = fmt(subtotal).replace("â‚¹", "Rs. ");
// doc.setFontSize(12);

// // Separator line before total
// doc.setLineWidth(0.5);
// doc.line(150, finalY - 4, 200, finalY - 4);

// doc.text(`Total: ${subText}`, 200, finalY + 2, { align: "right" });

// //   const subText = fmt(subtotal).replace("â‚¹", "Rs. ");
// //   doc.setFontSize(12);
// // //   doc.text(`Subtotal: ${subText}`, 200, finalY, { align: "right" });
// //   doc.text(`Total: ${subText}`, 200, finalY + 6, { align: "right" });

//   // âœ… New Page for Bank Details & Footer
//   doc.addPage();

//   // --- Bank Details Page ---
//   doc.setFontSize(14);
//   doc.text("Bank Details", 14, 30);

//   doc.setFontSize(11);
//   doc.text("Account Name: ABS Crackers", 14, 40);
//   doc.text("A/C No: 1234567890", 14, 50);
//   doc.text("IFSC: ABCD0123456", 14, 60);
//   doc.text("Bank: SBI, Sivakasi Branch", 14, 70);

//   // --- Footer ---
//   doc.setFontSize(12);
//   doc.text("Thank you for your order!", 80, 270);

//   // --- Save PDF ---
//   doc.save(`Invoice_${invoiceNo}.pdf`);
// }



//   async function downloadOrderPdf() {
//   const { jsPDF } = window.jspdf;
//   const doc = new jsPDF();

//   // --- Load Logo from URL ---
//   const img = new Image();
//   img.crossOrigin = "anonymous";
//   img.src = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
//   await new Promise(resolve => { img.onload = resolve; });

//   // Place logo
//   doc.addImage(img, "JPEG", 14, 10, 30, 30);

//   // --- Header ---
//   doc.setFontSize(16);
//   doc.text("ABS Crackers World", 50, 20);
//   doc.setFontSize(10);
//   doc.text("5/288/33, Sivakasi - 626189", 50, 26);
//   doc.text("Contact: +91 80720 98251 / 95971 89599", 50, 32);

//   // --- Invoice Info ---
//   const invoiceNo = "INV-" + Date.now();
//   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
//   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

//   // --- Customer Details ---
//   const name = document.getElementById('custName')?.value || 'N/A';
//   const phone = document.getElementById('custPhone')?.value || 'N/A';
//   const addr = document.getElementById('custAddress')?.value || 'N/A';

//   doc.setFontSize(12);
//   doc.text("Bill To:", 14, 50);
//   doc.text(`${name}`, 30, 50);
//   doc.text(`Mobile: ${phone}`, 30, 56);
//   doc.text("Ship To:", 14, 66);
//   doc.text(`${addr}`, 30, 66);

//   // --- Table Data ---
//   const rows = [];
//   let idx = 1, subtotal = 0;
//   for (const [id, qty] of Object.entries(Cart.items)) {
//     const it = Catalog.list.find(x => x.id == id);
//     if (!it) continue;
//     const lineTotal = (it.sale || 0) * qty;
//     subtotal += lineTotal;

//     // âœ… Replace â‚¹ with Rs. only for PDF
//     const price = fmt(it.sale).replace("â‚¹", "Rs. ");
//     const total = fmt(lineTotal).replace("â‚¹", "Rs. ");

//     rows.push([idx++, it.name, qty, price, total]);
//   }

//   // --- AutoTable ---
//   doc.autoTable({
//     head: [["#", "Product", "Qty", "Price", "Total"]],
//     body: rows,
//     startY: 80,
//     theme: "striped",
//     headStyles: { fillColor: [0, 123, 255] },
//     styles: { halign: "center" },
//     columnStyles: {
//       1: { halign: "left" },
//       2: { halign: "center" },
//       3: { halign: "right" },
//       4: { halign: "right" }
//     }
//   });

//   const finalY = doc.lastAutoTable.finalY + 10;

//   // --- Totals ---
//   const subText = fmt(subtotal).replace("â‚¹", "Rs. ");
//   doc.setFontSize(12);
//   doc.text(`Subtotal: ${subText}`, 200, finalY, { align: "right" });
//   doc.text(`Total: ${subText}`, 200, finalY + 6, { align: "right" });

//   // --- Bank Details ---
//   doc.setFontSize(10);
//   doc.text("Bank Details", 14, finalY + 20);
//   doc.text("Account Name: ABS Crackers", 14, finalY + 26);
//   doc.text("A/C No: 1234567890", 14, finalY + 32);
//   doc.text("IFSC: ABCD0123456", 14, finalY + 38);
//   doc.text("Bank: SBI, Sivakasi Branch", 14, finalY + 44);

//   // --- Footer ---
//   doc.setFontSize(11);
//   doc.text("Thank you for your order!", 80, 290);

//   // --- Save PDF ---
//   doc.save(`Invoice_${invoiceNo}.pdf`);
// }


//   async function downloadOrderPdf() {
//   const { jsPDF } = window.jspdf;
//   const doc = new jsPDF();

//   // âœ… use Noto Sans font (supports â‚¹)
//   doc.setFont("NotoSans", "normal");

//   // --- Load Logo from URL ---
//   const img = new Image();
//   img.crossOrigin = "anonymous";
//   img.src = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
//   await new Promise(resolve => { img.onload = resolve; });

//   // Place logo
//   doc.addImage(img, "JPEG", 14, 10, 30, 30);

//   // --- Header ---
//   doc.setFontSize(16);
//   doc.text("ABS Crackers World", 50, 20);
//   doc.setFontSize(10);
//   doc.text("5/288/33, Sivakasi - 626189", 50, 26);
//   doc.text("Contact: +91 80720 98251 / 95971 89599", 50, 32);

//   // --- Invoice Info ---
//   const invoiceNo = "INV-" + Date.now();
//   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
//   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

//   // --- Customer Details ---
//   const name = document.getElementById('custName')?.value || 'N/A';
//   const phone = document.getElementById('custPhone')?.value || 'N/A';
//   const addr = document.getElementById('custAddress')?.value || 'N/A';

//   doc.setFontSize(12);
//   doc.text("Bill To:", 14, 50);
//   doc.text(`${name}`, 30, 50);
//   doc.text(`Mobile: ${phone}`, 30, 56);
//   doc.text("Ship To:", 14, 66);
//   doc.text(`${addr}`, 30, 66);

//   // --- Table Data ---
//   const rows = [];
//   let idx = 1, subtotal = 0;
//   for (const [id, qty] of Object.entries(Cart.items)) {
//     const it = Catalog.list.find(x => x.id == id);
//     if (!it) continue;
//     const lineTotal = (it.sale || 0) * qty;
//     subtotal += lineTotal;
//     rows.push([
//       idx++,
//       it.name,
//       qty,
//       `â‚¹${it.sale}`,      // correct rupee symbol
//       `â‚¹${lineTotal}`
//     ]);
//   }

//   // --- AutoTable ---
//   doc.autoTable({
//     head: [["#", "Product", "Qty", "Price", "Total"]],
//     body: rows,
//     startY: 80,
//     theme: "striped",
//     headStyles: { fillColor: [0, 123, 255] },
//     styles: { font: "NotoSans", halign: "center" },
//     columnStyles: {
//       1: { halign: "left" },
//       2: { halign: "center" },
//       3: { halign: "right" },
//       4: { halign: "right" }
//     }
//   });

//   const finalY = doc.lastAutoTable.finalY + 10;

//   // --- Totals ---
//   doc.setFontSize(12);
//   doc.text(`Subtotal: â‚¹${subtotal}`, 200, finalY, { align: "right" });
//   doc.text(`Total: â‚¹${subtotal}`, 200, finalY + 6, { align: "right" });

//   // --- Bank Details ---
//   doc.setFontSize(10);
//   doc.text("Bank Details", 14, finalY + 20);
//   doc.text("Account Name: ABS Crackers", 14, finalY + 26);
//   doc.text("A/C No: 1234567890", 14, finalY + 32);
//   doc.text("IFSC: ABCD0123456", 14, finalY + 38);
//   doc.text("Bank: SBI, Sivakasi Branch", 14, finalY + 44);

//   // --- Footer ---
//   doc.setFontSize(11);
//   doc.text("Thank you for your order!", 80, 290);

//   // --- Save PDF ---
//   doc.save(`Invoice_${invoiceNo}.pdf`);
// }



//   async function downloadOrderPdf() {
//   const { jsPDF } = window.jspdf;
//   const doc = new jsPDF();

//    // âœ… use Noto Sans font (supports â‚¹)
//   doc.setFont("NotoSans", "normal");

//   // --- Load Logo from URL ---
//   const img = new Image();
//   img.crossOrigin = "anonymous"; // allow external image
//   img.src = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
//   await new Promise(resolve => { img.onload = resolve; });

//   // Place logo
//   doc.addImage(img, "JPEG", 14, 10, 30, 30);

//   // --- Header ---
//   doc.setFontSize(16);
//   doc.text("ABS Crackers World", 50, 20);
//   doc.setFontSize(10);
//   doc.text("5/288/33, Sivakasi - 626189", 50, 26);
//   doc.text("Contact: +91 80720 98251 / 95971 89599", 50, 32);

//   // --- Invoice Info ---
//   const invoiceNo = "INV-" + Date.now();
//   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
//   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

//   // --- Customer Details ---
//   const name = document.getElementById('custName')?.value || 'N/A';
//   const phone = document.getElementById('custPhone')?.value || 'N/A';
//   const addr = document.getElementById('custAddress')?.value || 'N/A';

//   doc.setFontSize(12);
//   doc.text("Bill To:", 14, 50);
//   doc.text(`${name}`, 30, 50);
//   doc.text(`Mobile: ${phone}`, 30, 56);
//   doc.text("Ship To:", 14, 66);
//   doc.text(`${addr}`, 30, 66);

//   // --- Table Data ---
//   const rows = [];
//   let idx = 1, subtotal = 0;
//   for (const [id, qty] of Object.entries(Cart.items)) {
//     const it = Catalog.list.find(x => x.id == id);
//     if (!it) continue;
//     const lineTotal = (it.sale || 0) * qty;
//     subtotal += lineTotal;
//     rows.push([
//       idx++,
//       it.name,
//       qty,
//       `\u20B9${it.sale}`,      // fixed rupee symbol
//       `\u20B9${lineTotal}`     // fixed rupee symbol
//     ]);
//   }

//   // --- AutoTable ---
//   doc.autoTable({
//     head: [["#", "Product", "Qty", "Price", "Total"]],
//     body: rows,
//     startY: 80,
//     theme: "striped",
//     headStyles: { fillColor: [0, 123, 255] }, // nice blue header
//     styles: { halign: "center" },
//     columnStyles: {
//       1: { halign: "left" }, // product name aligned left
//       2: { halign: "center" }, // qty center
//       3: { halign: "right" }, // price right
//       4: { halign: "right" }  // total right
//     }
//   });

//   const finalY = doc.lastAutoTable.finalY + 10;

//   // --- Totals ---
//   doc.setFontSize(12);
//   doc.text(`Subtotal: \u20B9${subtotal}`, 150, finalY, { align: "right" });
//   doc.text(`Total: \u20B9${subtotal}`, 150, finalY + 6, { align: "right" });

//   // --- Bank Details ---
//   doc.setFontSize(10);
//   doc.text("Bank Details", 14, finalY + 20);
//   doc.text("Account Name: ABS Crackers", 14, finalY + 26);
//   doc.text("A/C No: 1234567890", 14, finalY + 32);
//   doc.text("IFSC: ABCD0123456", 14, finalY + 38);
//   doc.text("Bank: SBI, Sivakasi Branch", 14, finalY + 44);

//   // --- Footer ---
//   doc.setFontSize(11);
//   doc.text("Thank you for your order!", 80, 290);

//   // --- Save PDF ---
//   doc.save(`Invoice_${invoiceNo}.pdf`);
// }


// async function downloadOrderPdf() {
//   const { jsPDF } = window.jspdf;
//   const doc = new jsPDF();

//   // --- Load Logo from URL ---
//   const img = new Image();
//   img.crossOrigin = "anonymous"; // allow external image
//   img.src = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
//   await new Promise(resolve => { img.onload = resolve; });

//   // Place logo
//   doc.addImage(img, "JPEG", 14, 10, 30, 30);

//   // --- Header ---
//   doc.setFontSize(16);
//   doc.text("ABS Crackers World", 50, 20);
//   doc.setFontSize(10);
//   doc.text("5/288/33, Sivakasi - 626189", 50, 26);
//   doc.text("Contact: +91 80720 98251 / 95971 89599", 50, 32);

//   // --- Invoice Info ---
//   const invoiceNo = "INV-" + Date.now();
//   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
//   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

//   // --- Customer Details ---
//   const name = document.getElementById('custName')?.value || 'N/A';
//   const phone = document.getElementById('custPhone')?.value || 'N/A';
//   const addr = document.getElementById('custAddress')?.value || 'N/A';

//   doc.setFontSize(12);
//   doc.text("Bill To:", 14, 50);
//   doc.text(`${name}`, 30, 50);
//   doc.text(`Mobile: ${phone}`, 30, 56);
//   doc.text("Ship To:", 14, 66);
//   doc.text(`${addr}`, 30, 66);

//   // --- Table Data ---
//   const rows = [];
//   let idx = 1, subtotal = 0;
//   for (const [id, qty] of Object.entries(Cart.items)) {
//     const it = Catalog.list.find(x => x.id == id);
//     if (!it) continue;
//     const lineTotal = (it.sale || 0) * qty;
//     subtotal += lineTotal;
//     rows.push([idx++, it.name, qty, `â‚¹${it.sale}`, `â‚¹${lineTotal}`]);
//   }

//   // --- AutoTable (with UMD call style) ---
// //   window.jspdf.jsPDF.autoTable(doc, {
// //     head: [["#", "Product", "Qty", "Price", "Total"]],
// //     body: rows,
// //     startY: 80,
// //   });

// doc.autoTable({
//   head: [["#", "Product", "Qty", "Price", "Total"]],
//   body: rows,
//   startY: 80,
// });


//   const finalY = doc.lastAutoTable.finalY + 10;
//   doc.text(`Subtotal: â‚¹${subtotal}`, 150, finalY);
//   doc.text(`Total: â‚¹${subtotal}`, 150, finalY + 6);

//   // --- Bank Details ---
//   doc.setFontSize(10);
//   doc.text("Bank Details", 14, finalY + 20);
//   doc.text("Account Name: ABS Crackers", 14, finalY + 26);
//   doc.text("A/C No: 1234567890", 14, finalY + 32);
//   doc.text("IFSC: ABCD0123456", 14, finalY + 38);
//   doc.text("Bank: SBI, Sivakasi Branch", 14, finalY + 44);

//   // --- Footer ---
//   doc.setFontSize(11);
//   doc.text("Thank you for your order!", 80, 290);

//   doc.save(`Invoice_${invoiceNo}.pdf`);
// }


//   async function downloadOrderPdf(){
//   const { jsPDF } = window.jspdf;
//   const doc = new jsPDF();

//   // --- Load Logo from URL ---
//   const img = new Image();
//   img.crossOrigin = "anonymous"; // important for hosted images
//   img.src = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
//   await new Promise(resolve => { img.onload = resolve; });

//   // Place logo
//   doc.addImage(img, "JPEG", 14, 10, 30, 30);

//   // --- Header ---
//   doc.setFontSize(16);
//   doc.text("ABS Crackers World", 50, 20);
//   doc.setFontSize(10);
//   doc.text("5/288/33, Sivakasi - 626189", 50, 26);
//   doc.text("Contact: +91 80720 98251 / 95971 89599", 50, 32);

//   // --- Invoice Info ---
//   const invoiceNo = "INV-" + Date.now();
//   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
//   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

//   // --- Customer Details ---
//   const name = document.getElementById('custName')?.value || 'N/A';
//   const phone = document.getElementById('custPhone')?.value || 'N/A';
//   const addr = document.getElementById('custAddress')?.value || 'N/A';

//   doc.setFontSize(12);
//   doc.text("Bill To:", 14, 50);
//   doc.text(`${name}`, 30, 50);
//   doc.text(`Mobile: ${phone}`, 30, 56);
//   doc.text("Ship To:", 14, 66);
//   doc.text(`${addr}`, 30, 66);

//   // --- Table ---
//   const rows = [];
//   let idx = 1, subtotal = 0;
//   for (const [id, qty] of Object.entries(Cart.items)) {
//     const it = Catalog.list.find(x => x.id == id);
//     if (!it) continue;
//     const lineTotal = (it.sale || 0) * qty;
//     subtotal += lineTotal;
//     rows.push([idx++, it.name, qty, `â‚¹${it.sale}`, `â‚¹${lineTotal}`]);
//   }

//   doc.autoTable({
//     head: [["#", "Product", "Qty", "Price", "Total"]],
//     body: rows,
//     startY: 80,
//   });

//   const finalY = doc.lastAutoTable.finalY + 10;
//   doc.text(`Subtotal: â‚¹${subtotal}`, 150, finalY);
//   doc.text(`Total: â‚¹${subtotal}`, 150, finalY + 6);

//   // --- Bank Details ---
//   doc.setFontSize(10);
//   doc.text("Bank Details", 14, finalY + 20);
//   doc.text("Account Name: ABS Crackers", 14, finalY + 26);
//   doc.text("A/C No: 1234567890", 14, finalY + 32);
//   doc.text("IFSC: ABCD0123456", 14, finalY + 38);
//   doc.text("Bank: SBI, Sivakasi Branch", 14, finalY + 44);

//   // --- Footer ---
//   doc.setFontSize(11);
//   doc.text("Thank you for your order!", 80, 290);

//   doc.save(`Invoice_${invoiceNo}.pdf`);








// //     const { jsPDF } = window.jspdf;
// //   const doc = new jsPDF();

// //   // --- Add Logo ---
// //   const logoUrl = "https://i.postimg.cc/9Fj7rpxZ/abs-logo.jpg";
// //   doc.addImage(logo, 'PNG', 14, 10, 30, 30);

// //   // --- Header ---
// //   doc.setFontSize(16);
// //   doc.text("ABS Crackers World", 50, 20);
// //   doc.setFontSize(10);
// //   doc.text("5/288/33, Sivakasi - 626189", 50, 26);
// //   doc.text("Contact: +91 80720 98251 / 95971 89599", 50, 32);

// //   // --- Invoice Info ---
// //   const invoiceNo = "INV-" + Date.now();
// //   doc.text(`Invoice No: ${invoiceNo}`, 150, 20);
// //   doc.text(`Date: ${new Date().toLocaleDateString()}`, 150, 26);

// //   // --- Customer Details ---
// //   const name = document.getElementById('custName')?.value || 'N/A';
// //   const phone = document.getElementById('custPhone')?.value || 'N/A';
// //   const addr = document.getElementById('custAddress')?.value || 'N/A';

// //   doc.setFontSize(12);
// //   doc.text("Bill To:", 14, 50);
// //   doc.text(`${name}`, 30, 50);
// //   doc.text(`Mobile: ${phone}`, 30, 56);
// //   doc.text("Ship To:", 14, 66);
// //   doc.text(`${addr}`, 30, 66);

// //   // --- Table ---
// //   const rows = [];
// //   let idx = 1, subtotal = 0;
// //   for (const [id, qty] of Object.entries(Cart.items)) {
// //     const it = Catalog.list.find(x => x.id == id);
// //     if (!it) continue;
// //     const lineTotal = (it.sale || 0) * qty;
// //     subtotal += lineTotal;
// //     rows.push([idx++, it.name, qty, `â‚¹${it.sale}`, `â‚¹${lineTotal}`]);
// //   }

// //   doc.autoTable({
// //     head: [["#", "Product", "Qty", "Price", "Total"]],
// //     body: rows,
// //     startY: 80,
// //   });

// //   const finalY = doc.lastAutoTable.finalY + 10;
// //   doc.text(`Subtotal: â‚¹${subtotal}`, 150, finalY);
// //   doc.text(`Total: â‚¹${subtotal}`, 150, finalY + 6);

// //   // --- Bank Details ---
// //   doc.setFontSize(10);
// //   doc.text("Bank Details", 14, finalY + 20);
// //   doc.text("Account Name: ABS Crackers", 14, finalY + 26);
// //   doc.text("A/C No: 1234567890", 14, finalY + 32);
// //   doc.text("IFSC: ABCD0123456", 14, finalY + 38);
// //   doc.text("Bank: SBI, Sivakasi Branch", 14, finalY + 44);

// //   // --- Footer ---
// //   doc.setFontSize(11);
// //   doc.text("Thank you for your order!", 80, 290);

// //   doc.save(`Invoice_${invoiceNo}.pdf`);
// // }

// // // Helper to convert image path to Base64
// // function toDataUrl(url) {
// //   return fetch(url)
// //     .then(response => response.blob())
// //     .then(blob => new Promise((resolve) => {
// //       const reader = new FileReader();
// //       reader.onloadend = () => resolve(reader.result);
// //       reader.readAsDataURL(blob);
// //     }));




//     //old

//     // const { jsPDF } = window.jspdf;
//     // const doc = new jsPDF();
//     // const margin=14; let y=16;
//     // doc.setFontSize(16); doc.text('ABS Crackers â€“ Order Summary', margin, y); y+=8;
//     // doc.setFontSize(10); doc.text(new Date().toLocaleString(), margin, y); y+=8;
//     // doc.setFontSize(12);
//     // for(const [id, qty] of Object.entries(Cart.items)){
//     //   const it = Catalog.list.find(x=>x.id==id); if(!it) continue;
//     //   const line = `${it.name} (${it.unit})  x${qty}    @ â‚¹${it.sale}  =  â‚¹${(it.sale||0)*qty}`;
//     //   if(y>280){ doc.addPage(); y=16; }
//     //   doc.text(line, margin, y); y+=7;
//     // }
//     // y+=4; doc.setLineWidth(0.4); doc.line(margin, y, 200, y); y+=8;
//     // doc.text(`MRP Total: ${el('#sumMrp').textContent}`, margin, y); y+=7;
//     // doc.text(`Discount Total: ${el('#sumSale').textContent}`, margin, y); y+=7;
//     // doc.text(`You Save: ${el('#sumSave').textContent}`, margin, y); y+=10;
//     // doc.setFontSize(10);
//     // doc.text('WhatsApp: +91 81110 87914 â€¢ Location: Sivakasi', margin, y);
//     // doc.save('ABS_Crackers_Order.pdf');
//   }

  // --- Events ---
  el('#search').addEventListener('input', renderGrid);
  el('#categoryFilter').addEventListener('change', renderGrid);
  el('#placeOrder').addEventListener('click', ()=>{ if(Object.keys(Cart.items).length===0){ toast('Add items first'); return; } openWhatsApp(); });
  el('#downloadPdf').addEventListener('click', ()=>{ if(Object.keys(Cart.items).length===0){ toast('Add items first'); return; } downloadOrderPdf(); });
  el('#clearCart').addEventListener('click', ()=>{ Cart.clear(); toast('Cart cleared'); });
  if (el('#importCsv')) {
    el('#importCsv').addEventListener('click', ()=>{
      const txt = el('#csvInput').value; const items = parseCsv(txt);
      if(!items.length) return toast('Nothing to import');
      Catalog.list = [...Catalog.list, ...items]; Catalog.save(); renderFilters(); renderGrid(); toast('Imported');
    });
  }
  if (el('#exportCsv')) {
    el('#exportCsv').addEventListener('click', ()=>{
      download('abs_crackers_catalog.csv', toCsv(Catalog.list));
    });
  }
  el('#placeOrderWithPdf').addEventListener('click', ()=>{ if(Object.keys(Cart.items).length===0){ toast('Add items first'); return; } buildAndSendPdfToWhatsApp(); });

  // --- Init ---
  Catalog.load(); Cart.load(); renderFilters(); renderGrid(); renderCart();
  console.log("First item with image:1576", Catalog.list[0]);

  // expose for inline handlers
  window.addToCart = addToCart; window.Cart = Cart; window.chgQty = chgQty;

  // --- Extra helpers for CSV ---
  function parseCsv(text){
    const lines = text.trim().split(/\r?\n/).filter(Boolean);
    if(!lines.length) return [];
    const out=[]; const hasHeader = /name\s*,\s*category/i.test(lines[0]);
    const rows = hasHeader ? lines.slice(1) : lines;
    for(const ln of rows){
      const cells = ln.split(',');
      if(cells.length<5) continue;
      const [name, category, unit, mrp, sale] = cells.map(c=>c.trim());
      out.push({id: Date.now()+Math.random(), name, category, unit, mrp: +mrp, sale: +sale});
    }
    return out;
  }
  function toCsv(items){
    const header = 'name,category,unit,mrp,sale';
    const rows = items.map(it=>[it.name,it.category,it.unit,it.mrp,it.sale].join(','));
    return [header,...rows].join('\n');
  }
  function download(filename, content){
    const blob = new Blob([content], {type:'text/plain'});
    const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = filename; a.click();
    URL.revokeObjectURL(a.href);
  }
  async function buildAndSendPdfToWhatsApp(){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF(); let y = 16;
    doc.setFontSize(16); doc.text('ABS Crackers â€“ Order Summary', 14, y); y+=10;
    for(const [id, qty] of Object.entries(Cart.items)){
      const it = Catalog.list.find(x=>x.id==id); if(!it) continue;
      doc.text(`${it.name} (${it.unit}) x${qty}  @ â‚¹${it.sale}`, 14, y); y+=7;
    }
    y+=5;
    doc.text(`MRP Total: ${el('#sumMrp').textContent}`, 14, y); y+=7;
    doc.text(`Discount Total: ${el('#sumSale').textContent}`, 14, y); y+=7;
    doc.text(`You Save: ${el('#sumSave').textContent}`, 14, y); y+=7;
    const pdfBlob = doc.output('blob');
    const pdfUrl = URL.createObjectURL(pdfBlob);
    const number = '918111087914';
    const msg = encodeURIComponent(`Hello, please find my crackers order summary PDF:\n${pdfUrl}`);
    window.open(`https://wa.me/${number}?text=${msg}`, '_blank');
  }
});
</script>

</body>
</html>
